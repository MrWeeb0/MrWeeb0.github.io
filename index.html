<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnZy - Personalized Math Learning</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --secondary: #3f37c9;
            --dark: #1a1a2e;
            --light: #f8f9fa;
            --success: #4cc9f0;
            --warning: #f8961e;
            --danger: #f72585;
            --gray: #adb5bd;
            --gray-dark: #495057;
            
            --bg: #ffffff;
            --text: #212529;
            --card-bg: #f8f9fa;
            --border: #dee2e6;
        }

        [data-theme="dark"] {
            --bg: #1a1a2e;
            --text: #f8f9fa;
            --card-bg: #16213e;
            --border: #495057;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        button {
            cursor: pointer;
            font-family: inherit;
        }

        /* Utility Classes */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .flex {
            display: flex;
        }

        .flex-col {
            flex-direction: column;
        }

        .items-center {
            align-items: center;
        }

        .justify-center {
            justify-content: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-1 {
            gap: 0.5rem;
        }

        .gap-2 {
            gap: 1rem;
        }

        .gap-3 {
            gap: 1.5rem;
        }

        .gap-4 {
            gap: 2rem;
        }

        .p-2 {
            padding: 1rem;
        }

        .p-4 {
            padding: 2rem;
        }

        .py-2 {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }

        .py-4 {
            padding-top: 2rem;
            padding-bottom: 2rem;
        }

        .px-4 {
            padding-left: 2rem;
            padding-right: 2rem;
        }

        .my-2 {
            margin-top: 1rem;
            margin-bottom: 1rem;
        }

        .my-4 {
            margin-top: 2rem;
            margin-bottom: 2rem;
        }

        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }

        .text-center {
            text-align: center;
        }

        .text-primary {
            color: var(--primary);
        }

        .text-success {
            color: var(--success);
        }

        .text-warning {
            color: var(--warning);
        }

        .text-danger {
            color: var(--danger);
        }

        .bg-primary {
            background-color: var(--primary);
        }

        .bg-success {
            background-color: var(--success);
        }

        .bg-warning {
            background-color: var(--warning);
        }

        .bg-danger {
            background-color: var(--danger);
        }

        .rounded {
            border-radius: 0.5rem;
        }

        .rounded-full {
            border-radius: 9999px;
        }

        .shadow {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .shadow-lg {
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        .hidden {
            display: none;
        }

        .w-full {
            width: 100%;
        }

        .max-w-md {
            max-width: 28rem;
        }

        .h-screen {
            height: 100vh;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .animate-fade {
            animation: fadeIn 0.5s ease-out;
        }

        .animate-slide {
            animation: slideIn 0.5s ease-out;
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        /* Components */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .btn-ghost {
            background-color: transparent;
            color: var(--primary);
        }

        .btn-ghost:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .input-label {
            font-weight: 500;
            color: var(--text);
        }

        .input-field {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            background-color: var(--bg);
            color: var(--text);
            font-family: inherit;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(67, 97, 238, 0.2);
        }

        .alert {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
        }

        .alert-error {
            background-color: rgba(247, 37, 133, 0.1);
            border-left: 4px solid var(--danger);
            color: var(--danger);
        }

        .progress-bar {
            height: 0.5rem;
            background-color: var(--border);
            border-radius: 0.25rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            transition: width 0.3s ease;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-primary {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .badge-success {
            background-color: rgba(76, 201, 240, 0.1);
            color: var(--success);
        }

        .badge-warning {
            background-color: rgba(248, 150, 30, 0.1);
            color: var(--warning);
        }

        /* Layout */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background-color: var(--bg);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .sidebar {
            width: 250px;
            height: calc(100vh - 70px);
            position: fixed;
            top: 70px;
            left: 0;
            background-color: var(--bg);
            border-right: 1px solid var(--border);
            padding: 1.5rem;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            color: var(--text);
            text-decoration: none;
            margin-bottom: 0.5rem;
            transition: all 0.2s;
        }

        .sidebar-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary);
        }

        .sidebar-item.active {
            background-color: rgba(67, 97, 238, 0.2);
            color: var(--primary);
            font-weight: 500;
        }

        .main-content {
            margin-left: 250px;
            padding: 2rem;
            min-height: calc(100vh - 70px);
        }

        .grid {
            display: grid;
            gap: 1.5rem;
        }

        .grid-cols-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .grid-cols-3 {
            grid-template-columns: repeat(3, 1fr);
        }

        .grid-cols-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        /* Auth Pages */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--bg);
        }

        .auth-card {
            width: 100%;
            max-width: 400px;
            padding: 2rem;
            background-color: var(--card-bg);
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-logo {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .auth-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .auth-subtitle {
            color: var(--gray);
            font-size: 0.875rem;
        }

        /* Quiz Styles */
        .quiz-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .quiz-question {
            margin-bottom: 2rem;
        }

        .quiz-question-text {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .quiz-option {
            display: block;
            padding: 1rem;
            margin-bottom: 0.75rem;
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            border-color: var(--primary);
        }

        .quiz-option.selected {
            background-color: rgba(67, 97, 238, 0.1);
            border-color: var(--primary);
        }

        .quiz-progress {
            margin-bottom: 2rem;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        /* Dashboard Styles */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .stats-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem;
        }

        .stats-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .stats-content {
            flex: 1;
        }

        .stats-label {
            font-size: 0.875rem;
            color: var(--gray);
        }

        .stats-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .category-card {
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .category-bg {
            height: 120px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end;
        }

        .category-overlay {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.7));
            color: white;
        }

        .category-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .category-progress {
            height: 4px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 2px;
            margin-top: 0.5rem;
        }

        .category-progress-fill {
            height: 100%;
            background-color: white;
            border-radius: 2px;
        }

        /* Topic Styles */
        .topic-card {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .topic-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .topic-title {
            font-size: 1.125rem;
            font-weight: 600;
        }

        .topic-status {
            font-size: 0.875rem;
        }

        .topic-status.completed {
            color: var(--success);
        }

        .topic-status.in-progress {
            color: var(--warning);
        }

        .topic-status.not-started {
            color: var(--gray);
        }

        .topic-description {
            color: var(--gray);
            margin-bottom: 1rem;
            flex: 1;
        }

        .topic-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Exercise Styles */
        .exercise-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .exercise-question {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
        }

        .exercise-options {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .exercise-option {
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .exercise-option:hover {
            border-color: var(--primary);
        }

        .exercise-option.selected {
            background-color: rgba(67, 97, 238, 0.1);
            border-color: var(--primary);
        }

        .exercise-option.correct {
            background-color: rgba(76, 201, 240, 0.1);
            border-color: var(--success);
        }

        .exercise-option.incorrect {
            background-color: rgba(247, 37, 133, 0.1);
            border-color: var(--danger);
        }

        .exercise-feedback {
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .exercise-feedback.correct {
            background-color: rgba(76, 201, 240, 0.1);
            border-left: 4px solid var(--success);
        }

        .exercise-feedback.incorrect {
            background-color: rgba(247, 37, 133, 0.1);
            border-left: 4px solid var(--danger);
        }

        .exercise-navigation {
            display: flex;
            justify-content: space-between;
        }

        /* AI Assistant Styles */
        .assistant-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 100;
        }

        .assistant-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            border: none;
        }

        .assistant-chat {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            max-height: 500px;
            background-color: var(--card-bg);
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .assistant-header {
            padding: 1rem;
            background-color: var(--primary);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .assistant-title {
            font-weight: 600;
        }

        .assistant-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.25rem;
            cursor: pointer;
        }

        .assistant-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
        }

        .assistant-message {
            margin-bottom: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            max-width: 80%;
        }

        .assistant-message.user {
            background-color: var(--primary);
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 0.25rem;
        }

        .assistant-message.bot {
            background-color: var(--border);
            margin-right: auto;
            border-bottom-left-radius: 0.25rem;
        }

        .assistant-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid var(--border);
        }

        .assistant-input-field {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            margin-right: 0.5rem;
        }

        .assistant-send {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Responsive Styles */
        @media (max-width: 1024px) {
            .grid-cols-4 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                top: 0;
                left: 0;
                height: 100vh;
                z-index: 90;
                background-color: var(--bg);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .navbar-menu {
                display: block;
            }

            .grid-cols-2, .grid-cols-3, .grid-cols-4 {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .auth-card {
                padding: 1.5rem;
            }

            .assistant-chat {
                width: 300px;
            }
        }

        /* Dark mode toggle */
        .theme-toggle {
            position: relative;
            width: 50px;
            height: 24px;
        }

        .theme-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .theme-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray);
            transition: .4s;
            border-radius: 24px;
        }

        .theme-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .theme-slider {
            background-color: var(--primary);
        }

        input:checked + .theme-slider:before {
            transform: translateX(26px);
        }

        /* Animations toggle */
        .animations-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .animations-toggle input {
            width: 16px;
            height: 16px;
        }

        /* Settings dropdown */
        .settings-dropdown {
            position: relative;
        }

        .settings-menu {
            position: absolute;
            right: 0;
            top: 100%;
            background-color: var(--card-bg);
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 0.5rem;
            min-width: 200px;
            z-index: 10;
        }

        .settings-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            cursor: pointer;
        }

        .settings-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        /* Loading spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(67, 97, 238, 0.2);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Streak tracker */
        .streak-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .streak-count {
            font-weight: 600;
            color: var(--warning);
        }

        .streak-icon {
            color: var(--warning);
        }

        /* XP level indicator */
        .level-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .level-badge {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
        }

        /* Confetti effect */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background-color: var(--primary);
            top: -10px;
            z-index: 999;
        }

        /* Video player */
        .video-player {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: var(--dark);
            border-radius: 0.5rem;
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .video-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            background-color: var(--gray-dark);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark);
            color: white;
            text-align: center;
            border-radius: 6px;
            padding: 0.5rem;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // App State Management
        const AppState = (() => {
            let state = {
                currentPage: 'signin',
                user: null,
                learningStyle: null,
                currentCategory: null,
                currentTopic: null,
                currentExercise: 0,
                darkMode: false,
                animationsEnabled: true,
                assistantOpen: false,
                sidebarOpen: false,
                streak: 3,
                xp: 1250,
                level: 5,
                language: 'en',
                messages: []
            };

            const subscribers = [];

            const getState = () => state;

            const setState = (newState) => {
                state = { ...state, ...newState };
                subscribers.forEach(subscriber => subscriber(state));
                saveToLocalStorage();
            };

            const subscribe = (callback) => {
                subscribers.push(callback);
                return () => {
                    const index = subscribers.indexOf(callback);
                    if (index > -1) {
                        subscribers.splice(index, 1);
                    }
                };
            };

            const loadFromLocalStorage = () => {
                const savedState = localStorage.getItem('learnzyState');
                if (savedState) {
                    state = JSON.parse(savedState);
                }
            };

            const saveToLocalStorage = () => {
                localStorage.setItem('learnzyState', JSON.stringify(state));
            };

            // Initialize
            loadFromLocalStorage();

            return {
                getState,
                setState,
                subscribe
            };
        })();

        // Translations
        const translations = {
            en: {
                signin: {
                    title: "Welcome Back",
                    subtitle: "Sign in to continue your math learning journey",
                    email: "Email",
                    password: "Password",
                    submit: "Sign In",
                    noAccount: "Don't have an account?",
                    signup: "Sign Up",
                    error: "Invalid email or password"
                },
                signup: {
                    title: "Create Account",
                    subtitle: "Join LearnZy to start your personalized math journey",
                    name: "Full Name",
                    email: "Email",
                    password: "Password",
                    confirm: "Confirm Password",
                    grade: "Grade Level",
                    terms: "I agree to the Terms and Privacy Policy",
                    submit: "Create Account",
                    haveAccount: "Already have an account?",
                    signin: "Sign In",
                    errors: {
                        passwordMatch: "Passwords do not match",
                        passwordLength: "Password must be at least 8 characters",
                        emailExists: "Email already registered"
                    }
                },
                learningStyle: {
                    title: "Learning Style Quiz",
                    next: "Next",
                    previous: "Previous",
                    submit: "Submit",
                    question: "Question {current} of {total}"
                },
                dashboard: {
                    title: "Math Learning Dashboard",
                    welcome: "Welcome back, {name}!",
                    learningStyle: "Your learning style: {style}",
                    completeAssessment: "Complete the learning style assessment to personalize your experience",
                    stats: {
                        topicsStarted: "Topics Started",
                        topicsCompleted: "Topics Completed",
                        currentStreak: "Current Streak",
                        badgesEarned: "Badges Earned"
                    },
                    categories: "Math Categories",
                    badges: "Recent Badges",
                    days: "days",
                    student: "Student"
                },
                category: {
                    back: "Back to Dashboard",
                    topics: "Topics",
                    complete: "{percent}% Complete",
                    status: {
                        completed: "Completed",
                        inProgress: "In Progress",
                        notStarted: "Not Started"
                    },
                    start: "Start",
                    review: "Review",
                    exercises: "{count} exercises"
                },
                topic: {
                    back: "Back to {category}",
                    videoLesson: "Video Lesson",
                    exercises: "Practice Exercises",
                    noExercises: "No exercises available for this topic yet. Check back soon!",
                    startExercises: "Start Exercises"
                },
                exercise: {
                    back: "Back to {topic}",
                    progress: "Exercise {current} of {total}",
                    check: "Check Answer",
                    next: "Next Exercise",
                    finish: "Finish Topic",
                    previous: "Previous",
                    feedback: {
                        correct: "Correct! ðŸŽ‰",
                        incorrect: "Incorrect ðŸ˜•"
                    }
                },
                navbar: {
                    menu: [
                        { text: "Dashboard", page: "dashboard", icon: "fas fa-home" },
                        { text: "My Courses", page: "courses", icon: "fas fa-book" },
                        { text: "Achievements", page: "achievements", icon: "fas fa-trophy" },
                        { text: "Progress", page: "progress", icon: "fas fa-chart-line" },
                        { text: "Settings", page: "settings", icon: "fas fa-cog" }
                    ],
                    streak: "Current streak: {days} days",
                    level: "Level {level} - {xp} XP",
                    settings: {
                        darkMode: "Dark Mode",
                        animations: "Animations",
                        language: "Language"
                    }
                },
                assistant: {
                    title: "LearnZy AI Assistant",
                    placeholder: "Ask a math question..."
                },
                continueToDashboard: "Continue to Dashboard",
                yourStyle: "Your learning style is: {style}"
            },
            ro: {
                signin: {
                    title: "Bine ai revenit",
                    subtitle: "ConecteazÄƒ-te pentru a-È›i continua cÄƒlÄƒtoria Ã®n Ã®nvÄƒÈ›area matematicii",
                    email: "Email",
                    password: "ParolÄƒ",
                    submit: "ConecteazÄƒ-te",
                    noAccount: "Nu ai un cont?",
                    signup: "ÃŽnregistreazÄƒ-te",
                    error: "Email sau parolÄƒ invalidÄƒ"
                },
                signup: {
                    title: "CreeazÄƒ cont",
                    subtitle: "AlÄƒturÄƒ-te LearnZy pentru a Ã®ncepe cÄƒlÄƒtoria ta personalizatÄƒ Ã®n matematicÄƒ",
                    name: "Nume complet",
                    email: "Email",
                    password: "ParolÄƒ",
                    confirm: "ConfirmÄƒ parola",
                    grade: "ClasÄƒ",
                    terms: "Sunt de acord cu Termenii È™i Politica de ConfidenÈ›ialitate",
                    submit: "CreeazÄƒ cont",
                    haveAccount: "Ai deja un cont?",
                    signin: "ConecteazÄƒ-te",
                    errors: {
                        passwordMatch: "Parolele nu coincid",
                        passwordLength: "Parola trebuie sÄƒ aibÄƒ cel puÈ›in 8 caractere",
                        emailExists: "Email deja Ã®nregistrat"
                    }
                },
                learningStyle: {
                    title: "Test de stil de Ã®nvÄƒÈ›are",
                    next: "UrmÄƒtorul",
                    previous: "Anterior",
                    submit: "Trimite",
                    question: "ÃŽntrebarea {current} din {total}"
                },
                dashboard: {
                    title: "Panou de Ã®nvÄƒÈ›are matematicÄƒ",
                    welcome: "Bine ai revenit, {name}!",
                    learningStyle: "Stilul tÄƒu de Ã®nvÄƒÈ›are: {style}",
                    completeAssessment: "CompleteazÄƒ evaluarea stilului de Ã®nvÄƒÈ›are pentru a personaliza experienÈ›a",
                    stats: {
                        topicsStarted: "Subiecte Ã®ncepute",
                        topicsCompleted: "Subiecte finalizate",
                        currentStreak: "È˜ir curent",
                        badgesEarned: "Insigne obÈ›inute"
                    },
                    categories: "Categorii de matematicÄƒ",
                    badges: "Insigne recente",
                    days: "zile",
                    student: "Student"
                },
                category: {
                    back: "ÃŽnapoi la panou",
                    topics: "Subiecte",
                    complete: "{percent}% Complet",
                    status: {
                        completed: "Finalizat",
                        inProgress: "ÃŽn desfÄƒÈ™urare",
                        notStarted: "NeÃ®nceput"
                    },
                    start: "ÃŽncepe",
                    review: "RevizuieÈ™te",
                    exercises: "{count} exerciÈ›ii"
                },
                topic: {
                    back: "ÃŽnapoi la {category}",
                    videoLesson: "LecÈ›ie video",
                    exercises: "ExerciÈ›ii practice",
                    noExercises: "Nu existÄƒ exerciÈ›ii disponibile pentru acest subiect Ã®ncÄƒ. Revino mai tÃ¢rziu!",
                    startExercises: "ÃŽncepe ExerciÈ›iile"
                },
                exercise: {
                    back: "ÃŽnapoi la {topic}",
                    progress: "ExerciÈ›iul {current} din {total}",
                    check: "VerificÄƒ rÄƒspunsul",
                    next: "UrmÄƒtorul exerciÈ›iu",
                    finish: "FinalizeazÄƒ subiectul",
                    previous: "Anterior",
                    feedback: {
                        correct: "Corect! ðŸŽ‰",
                        incorrect: "Incorect ðŸ˜•"
                    }
                },
                navbar: {
                    menu: [
                        { text: "Panou", page: "dashboard", icon: "fas fa-home" },
                        { text: "Cursurile mele", page: "courses", icon: "fas fa-book" },
                        { text: "RealizÄƒri", page: "achievements", icon: "fas fa-trophy" },
                        { text: "Progres", page: "progress", icon: "fas fa-chart-line" },
                        { text: "SetÄƒri", page: "settings", icon: "fas fa-cog" }
                    ],
                    streak: "È˜ir curent: {days} zile",
                    level: "Nivel {level} - {xp} XP",
                    settings: {
                        darkMode: "Mod Ã®ntunecat",
                        animations: "AnimaÈ›ii",
                        language: "Limba"
                    }
                },
                assistant: {
                    title: "Asistent AI LearnZy",
                    placeholder: "Pune o Ã®ntrebare de matematicÄƒ..."
                },
                continueToDashboard: "ContinuÄƒ la Panou",
                yourStyle: "Stilul tÄƒu de Ã®nvÄƒÈ›are este: {style}"
            }
        };

        // Mock Data
        const mockUsers = [
            { id: 1, email: 'student@example.com', password: 'password123', name: 'Alexandru Popescu' }
        ];

        const learningStyles = {
            visual: {
                name: { en: 'Visual Learner', ro: 'ÃŽnvÄƒÈ›are vizualÄƒ' },
                description: { 
                    en: 'You learn best through visual aids like diagrams, charts, and colors. LearnZy will provide more visual explanations and graphical representations of mathematical concepts.',
                    ro: 'ÃŽnveÈ›i cel mai bine prin ajutoare vizuale cum ar fi diagrame, grafice È™i culori. LearnZy va oferi mai multe explicaÈ›ii vizuale È™i reprezentÄƒri grafice ale conceptelor matematice.'
                },
                icon: 'far fa-eye'
            },
            auditory: {
                name: { en: 'Auditory Learner', ro: 'ÃŽnvÄƒÈ›are auditivÄƒ' },
                description: { 
                    en: 'You learn best through listening and verbal explanations. LearnZy will focus on audio explanations and verbal descriptions of mathematical concepts.',
                    ro: 'ÃŽnveÈ›i cel mai bine prin ascultare È™i explicaÈ›ii verbale. LearnZy se va concentra pe explicaÈ›ii audio È™i descrieri verbale ale conceptelor matematice.'
                },
                icon: 'far fa-comment-dots'
            },
            kinesthetic: {
                name: { en: 'Kinesthetic Learner', ro: 'ÃŽnvÄƒÈ›are kinesteticÄƒ' },
                description: { 
                    en: 'You learn best through hands-on activities and movement. LearnZy will provide interactive exercises and real-world applications of mathematical concepts.',
                    ro: 'ÃŽnveÈ›i cel mai bine prin activitÄƒÈ›i practice È™i miÈ™care. LearnZy va oferi exerciÈ›ii interactive È™i aplicaÈ›ii practice ale conceptelor matematice.'
                },
                icon: 'far fa-hand-paper'
            },
            logical: {
                name: { en: 'Logical/Mathematical Learner', ro: 'ÃŽnvÄƒÈ›are logicÄƒ/matematicÄƒ' },
                description: { 
                    en: 'You learn best through logical reasoning and systematic thinking. LearnZy will emphasize problem-solving strategies and step-by-step logical explanations.',
                    ro: 'ÃŽnveÈ›i cel mai bine prin raÈ›ionament logic È™i gÃ¢ndire sistematicÄƒ. LearnZy va sublinia strategii de rezolvare a problemelor È™i explicaÈ›ii logice pas cu pas.'
                },
                icon: 'far fa-brain'
            }
        };

        const quizQuestions = [
            {
                id: 1,
                question: {
                    en: 'When learning something new, I prefer:',
                    ro: 'CÃ¢nd Ã®nvÄƒÈ› ceva nou, prefer:'
                },
                options: [
                    { text: { en: 'Seeing diagrams or images', ro: 'SÄƒ vÄƒd diagrame sau imagini' }, style: 'visual' },
                    { text: { en: 'Listening to an explanation', ro: 'SÄƒ ascult o explicaÈ›ie' }, style: 'auditory' },
                    { text: { en: 'Doing it with my hands', ro: 'SÄƒ fac cu mÃ¢inile mele' }, style: 'kinesthetic' },
                    { text: { en: 'Breaking it into steps', ro: 'SÄƒ o Ã®mpart Ã®n paÈ™i' }, style: 'logical' }
                ]
            },
            {
                id: 2,
                question: {
                    en: 'I remember best when I:',
                    ro: 'ÃŽmi amintesc cel mai bine cÃ¢nd:'
                },
                options: [
                    { text: { en: 'See information visually', ro: 'VÄƒd informaÈ›ia vizual' }, style: 'visual' },
                    { text: { en: 'Hear it explained', ro: 'O aud explicatÄƒ' }, style: 'auditory' },
                    { text: { en: 'Try it myself', ro: 'ÃŽncerc eu Ã®nsumi' }, style: 'kinesthetic' },
                    { text: { en: 'Analyze it logically', ro: 'O analizez logic' }, style: 'logical' }
                ]
            },
            {
                id: 3,
                question: {
                    en: 'I enjoy lessons that:',
                    ro: 'ÃŽmi plac lecÈ›iile care:'
                },
                options: [
                    { text: { en: 'Use animations or drawings', ro: 'Folosesc animaÈ›ii sau desene' }, style: 'visual' },
                    { text: { en: 'Include verbal explanations', ro: 'Includ explicaÈ›ii verbale' }, style: 'auditory' },
                    { text: { en: 'Allow hands-on experiments', ro: 'Permit experimente practice' }, style: 'kinesthetic' },
                    { text: { en: 'Focus on problem solving', ro: 'Se concentreazÄƒ pe rezolvarea problemelor' }, style: 'logical' }
                ]
            },
            {
                id: 4,
                question: {
                    en: 'In class, I prefer:',
                    ro: 'ÃŽn clasÄƒ, prefer:'
                },
                options: [
                    { text: { en: 'Watching a demo or slides', ro: 'SÄƒ urmÄƒresc o demonstraÈ›ie sau slide-uri' }, style: 'visual' },
                    { text: { en: 'Listening to the teacher', ro: 'SÄƒ ascult profesorul' }, style: 'auditory' },
                    { text: { en: 'Group exercises or projects', ro: 'ExerciÈ›ii sau proiecte Ã®n grup' }, style: 'kinesthetic' },
                    { text: { en: 'Logical explanations', ro: 'ExplicaÈ›ii logice' }, style: 'logical' }
                ]
            },
            {
                id: 5,
                question: {
                    en: 'For homework, I usually:',
                    ro: 'Pentru teme, de obicei:'
                },
                options: [
                    { text: { en: 'Make notes or sketches', ro: 'Fac notiÈ›e sau schiÈ›e' }, style: 'visual' },
                    { text: { en: 'Read aloud or use audiobooks', ro: 'Citesc cu voce tare sau folosesc cÄƒrÈ›i audio' }, style: 'auditory' },
                    { text: { en: 'Use flashcards or build models', ro: 'Folosesc flashcard-uri sau construiesc modele' }, style: 'kinesthetic' },
                    { text: { en: 'Solve extra problems or puzzles', ro: 'Rezolv probleme suplimentare sau puzzle-uri' }, style: 'logical' }
                ]
            },
            {
                id: 6,
                question: {
                    en: 'My favorite school subjects are:',
                    ro: 'Materiile mele preferate sunt:'
                },
                options: [
                    { text: { en: 'Art / Geography', ro: 'Arte / Geografie' }, style: 'visual' },
                    { text: { en: 'Music / Literature', ro: 'MuzicÄƒ / LiteraturÄƒ' }, style: 'auditory' },
                    { text: { en: 'PE / Lab Science', ro: 'EducaÈ›ie fizicÄƒ / È˜tiinÈ›e experimentale' }, style: 'kinesthetic' },
                    { text: { en: 'Math / Physics', ro: 'MatematicÄƒ / FizicÄƒ' }, style: 'logical' }
                ]
            },
            {
                id: 7,
                question: {
                    en: 'I find it easiest to learn when:',
                    ro: 'Consider cÄƒ Ã®nvÄƒÈ› cel mai uÈ™or cÃ¢nd:'
                },
                options: [
                    { text: { en: 'I can visualize the content', ro: 'Pot vizualiza conÈ›inutul' }, style: 'visual' },
                    { text: { en: 'I hear someone explain it', ro: 'Aud pe cineva explicÃ¢nd' }, style: 'auditory' },
                    { text: { en: 'I can interact with it', ro: 'Pot interacÈ›iona cu el' }, style: 'kinesthetic' },
                    { text: { en: 'I can find patterns or logic', ro: 'Pot gÄƒsi modele sau logicÄƒ' }, style: 'logical' }
                ]
            }
        ];

        const categories = [
            {
                id: 1,
                name: { en: 'Algebra', ro: 'AlgebrÄƒ' },
                description: { 
                    en: 'Master the fundamentals of algebraic expressions, equations, and functions.',
                    ro: 'StÄƒpÃ¢neÈ™te elementele fundamentale ale expresiilor algebrice, ecuaÈ›iilor È™i funcÈ›iilor.'
                },
                progress: 65,
                topics: [
                    {
                        id: 1,
                        name: { en: 'Linear Equations', ro: 'EcuaÈ›ii liniare' },
                        description: { 
                            en: 'Solve equations of the first degree with one variable.',
                            ro: 'RezolvÄƒ ecuaÈ›ii de gradul Ã®ntÃ¢i cu o variabilÄƒ.'
                        },
                        completed: true,
                        exercises: [
                            {
                                id: 1,
                                question: { 
                                    en: 'Solve for x: 2x + 5 = 15',
                                    ro: 'RezolvÄƒ pentru x: 2x + 5 = 15'
                                },
                                options: [
                                    { en: 'x = 5', ro: 'x = 5' },
                                    { en: 'x = 7', ro: 'x = 7' },
                                    { en: 'x = 10', ro: 'x = 10' },
                                    { en: 'x = 12', ro: 'x = 12' }
                                ],
                                answer: 0,
                                explanation: { 
                                    en: 'Subtract 5 from both sides: 2x = 10. Then divide both sides by 2: x = 5.',
                                    ro: 'ScÄƒdem 5 din ambele pÄƒrÈ›i: 2x = 10. Apoi Ã®mpÄƒrÈ›im ambele pÄƒrÈ›i la 2: x = 5.'
                                }
                            },
                            {
                                id: 2,
                                question: { 
                                    en: 'Which of these is a linear equation?',
                                    ro: 'Care dintre acestea este o ecuaÈ›ie liniarÄƒ?'
                                },
                                options: [
                                    { en: 'xÂ² + 2x + 1 = 0', ro: 'xÂ² + 2x + 1 = 0' },
                                    { en: '3x - 7 = 2', ro: '3x - 7 = 2' },
                                    { en: 'y = âˆšx', ro: 'y = âˆšx' },
                                    { en: 'xÂ³ = 8', ro: 'xÂ³ = 8' }
                                ],
                                answer: 1,
                                explanation: { 
                                    en: 'A linear equation has variables with exponent 1. 3x - 7 = 2 is the only option that fits.',
                                    ro: 'O ecuaÈ›ie liniarÄƒ are variabile cu exponentul 1. 3x - 7 = 2 este singura opÈ›iune care se potriveÈ™te.'
                                }
                            }
                        ]
                    },
                    {
                        id: 2,
                        name: { en: 'Quadratic Equations', ro: 'EcuaÈ›ii pÄƒtratice' },
                        description: { 
                            en: 'Solve second-degree polynomial equations using various methods.',
                            ro: 'RezolvÄƒ ecuaÈ›ii polinomiale de gradul doi folosind diverse metode.'
                        },
                        completed: true,
                        exercises: [
                            {
                                id: 1,
                                question: { 
                                    en: 'What are the solutions to xÂ² - 5x + 6 = 0?',
                                    ro: 'Care sunt soluÈ›iile ecuaÈ›iei xÂ² - 5x + 6 = 0?'
                                },
                                options: [
                                    { en: 'x = 2 and x = 3', ro: 'x = 2 È™i x = 3' },
                                    { en: 'x = 1 and x = 6', ro: 'x = 1 È™i x = 6' },
                                    { en: 'x = -2 and x = -3', ro: 'x = -2 È™i x = -3' },
                                    { en: 'x = 0.5 and x = 6', ro: 'x = 0.5 È™i x = 6' }
                                ],
                                answer: 0,
                                explanation: { 
                                    en: 'Factor the equation: (x-2)(x-3) = 0. Solutions are x=2 and x=3.',
                                    ro: 'FactorizÄƒm ecuaÈ›ia: (x-2)(x-3) = 0. SoluÈ›iile sunt x=2 È™i x=3.'
                                }
                            }
                        ]
                    },
                    {
                        id: 3,
                        name: { en: 'Polynomials', ro: 'Polinoame' },
                        description: { 
                            en: 'Understand and manipulate polynomial expressions.',
                            ro: 'ÃŽnÈ›elege È™i manipuleazÄƒ expresii polinomiale.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 4,
                        name: { en: 'Functions', ro: 'FuncÈ›ii' },
                        description: { 
                            en: 'Explore different types of functions and their properties.',
                            ro: 'ExploreazÄƒ diferite tipuri de funcÈ›ii È™i proprietÄƒÈ›ile lor.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 5,
                        name: { en: 'Systems of Equations', ro: 'Sisteme de ecuaÈ›ii' },
                        description: { 
                            en: 'Solve multiple equations with multiple variables.',
                            ro: 'RezolvÄƒ sisteme de ecuaÈ›ii cu multiple variabile.'
                        },
                        completed: false,
                        exercises: []
                    }
                ]
            },
            {
                id: 2,
                name: { en: 'Geometry', ro: 'Geometrie' },
                description: { 
                    en: 'Explore shapes, sizes, and properties of figures in space.',
                    ro: 'ExploreazÄƒ forme, dimensiuni È™i proprietÄƒÈ›i ale figurilor Ã®n spaÈ›iu.'
                },
                progress: 30,
                topics: [
                    {
                        id: 1,
                        name: { en: 'Basic Geometry', ro: 'Geometrie de bazÄƒ' },
                        description: { 
                            en: 'Learn about points, lines, angles, and planes.',
                            ro: 'ÃŽnvaÈ›Äƒ despre puncte, drepte, unghiuri È™i plane.'
                        },
                        completed: true,
                        exercises: []
                    },
                    {
                        id: 2,
                        name: { en: 'Triangles', ro: 'Triunghiuri' },
                        description: { 
                            en: 'Study properties and theorems related to triangles.',
                            ro: 'StudiazÄƒ proprietÄƒÈ›i È™i teoreme legate de triunghiuri.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 3,
                        name: { en: 'Circles', ro: 'Cercuri' },
                        description: { 
                            en: 'Understand circle theorems and properties.',
                            ro: 'ÃŽnÈ›elege teoremele È™i proprietÄƒÈ›ile cercurilor.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 4,
                        name: { en: 'Polygons', ro: 'Poligoane' },
                        description: { 
                            en: 'Explore properties of multi-sided shapes.',
                            ro: 'ExploreazÄƒ proprietÄƒÈ›ile formelor cu multiple laturi.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 5,
                        name: { en: 'Solid Geometry', ro: 'Geometrie solidÄƒ' },
                        description: { 
                            en: 'Study three-dimensional shapes and their properties.',
                            ro: 'StudiazÄƒ forme tridimensionale È™i proprietÄƒÈ›ile lor.'
                        },
                        completed: false,
                        exercises: []
                    }
                ]
            },
            {
                id: 3,
                name: { en: 'Trigonometry', ro: 'Trigonometrie' },
                description: { 
                    en: 'Discover relationships between angles and sides of triangles.',
                    ro: 'DescoperÄƒ relaÈ›iile dintre unghiuri È™i laturile triunghiurilor.'
                },
                progress: 10,
                topics: [
                    {
                        id: 1,
                        name: { en: 'Trigonometric Ratios', ro: 'Rapoarte trigonometrice' },
                        description: { 
                            en: 'Learn about sine, cosine, and tangent functions.',
                            ro: 'ÃŽnvaÈ›Äƒ despre funcÈ›iile sinus, cosinus È™i tangentÄƒ.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 2,
                        name: { en: 'Unit Circle', ro: 'Cercul unitate' },
                        description: { 
                            en: 'Understand the relationship between angles and coordinates.',
                            ro: 'ÃŽnÈ›elege relaÈ›ia dintre unghiuri È™i coordonate.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 3,
                        name: { en: 'Trigonometric Identities', ro: 'IdentitÄƒÈ›i trigonometrice' },
                        description: { 
                            en: 'Master fundamental trigonometric identities.',
                            ro: 'StÄƒpÃ¢neÈ™te identitÄƒÈ›ile trigonometrice fundamentale.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 4,
                        name: { en: 'Graphs of Trig Functions', ro: 'Grafice ale funcÈ›iilor trigonometrice' },
                        description: { 
                            en: 'Visualize and analyze trigonometric functions.',
                            ro: 'VizualizeazÄƒ È™i analizeazÄƒ funcÈ›ii trigonometrice.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 5,
                        name: { en: 'Trigonometric Equations', ro: 'EcuaÈ›ii trigonometrice' },
                        description: { 
                            en: 'Solve equations involving trigonometric functions.',
                            ro: 'RezolvÄƒ ecuaÈ›ii care implicÄƒ funcÈ›ii trigonometrice.'
                        },
                        completed: false,
                        exercises: []
                    }
                ]
            },
            {
                id: 4,
                name: { en: 'Calculus', ro: 'Calcul' },
                description: { 
                    en: 'Dive into the mathematics of change and motion.',
                    ro: 'AprofundeazÄƒ-te Ã®n matematica schimbÄƒrii È™i miÈ™cÄƒrii.'
                },
                progress: 5,
                topics: [
                    {
                        id: 1,
                        name: { en: 'Limits', ro: 'Limite' },
                        description: { 
                            en: 'Understand the fundamental concept of limits.',
                            ro: 'ÃŽnÈ›elege conceptul fundamental al limitelor.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 2,
                        name: { en: 'Derivatives', ro: 'Derivate' },
                        description: { 
                            en: 'Learn about rates of change and slopes of curves.',
                            ro: 'ÃŽnvaÈ›Äƒ despre rate de schimbare È™i pante ale curbelor.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 3,
                        name: { en: 'Integrals', ro: 'Integrale' },
                        description: { 
                            en: 'Discover the mathematics of accumulation and area.',
                            ro: 'DescoperÄƒ matematica acumulÄƒrii È™i ariei.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 4,
                        name: { en: 'Applications of Derivatives', ro: 'AplicaÈ›ii ale derivatelor' },
                        description: { 
                            en: 'Apply derivatives to real-world problems.',
                            ro: 'AplicÄƒ derivate Ã®n probleme din lumea realÄƒ.'
                        },
                        completed: false,
                        exercises: []
                    },
                    {
                        id: 5,
                        name: { en: 'Applications of Integrals', ro: 'AplicaÈ›ii ale integralelor' },
                        description: { 
                            en: 'Apply integrals to solve practical problems.',
                            ro: 'AplicÄƒ integrale pentru a rezolva probleme practice.'
                        },
                        completed: false,
                        exercises: []
                    }
                ]
            }
        ];

        const badges = [
            { 
                id: 1, 
                name: { en: 'Fast Learner', ro: 'ÃŽnvÄƒÈ›are rapidÄƒ' }, 
                description: { 
                    en: 'Complete 5 exercises in one day',
                    ro: 'CompleteazÄƒ 5 exerciÈ›ii Ã®ntr-o singurÄƒ zi'
                }, 
                earned: true 
            },
            { 
                id: 2, 
                name: { en: 'Algebra Master', ro: 'Maestru al algebrei' }, 
                description: { 
                    en: 'Complete all Algebra topics',
                    ro: 'CompleteazÄƒ toate subiectele de algebrÄƒ'
                }, 
                earned: false 
            },
            { 
                id: 3, 
                name: { en: 'Week Streak', ro: 'È˜ir sÄƒptÄƒmÃ¢nal' }, 
                description: { 
                    en: 'Practice for 7 days in a row',
                    ro: 'ExerseazÄƒ timp de 7 zile consecutive'
                }, 
                earned: false 
            },
            { 
                id: 4, 
                name: { en: 'Quick Thinker', ro: 'GÃ¢ndire rapidÄƒ' }, 
                description: { 
                    en: 'Solve 10 exercises correctly in a row',
                    ro: 'RezolvÄƒ corect 10 exerciÈ›ii la rÃ¢nd'
                }, 
                earned: true 
            }
        ];

        // Mock API Functions
        const mockAPI = {
            login: (email, password) => {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const user = mockUsers.find(u => u.email === email && u.password === password);
                        if (user) {
                            resolve({ success: true, user });
                        } else {
                            reject({ success: false, message: 'Invalid email or password' });
                        }
                    }, 1000);
                });
            },
            
            submitLearningStyle: (style) => {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ success: true, style });
                    }, 500);
                });
            },
            
            getMathContent: () => {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ success: true, categories });
                    }, 500);
                });
            },
            
            getBadges: () => {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        resolve({ success: true, badges });
                    }, 500);
                });
            },
            
            aiAssistant: (message) => {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        const responses = {
                            'hello': { en: 'Hello! How can I help you with math today?', ro: 'BunÄƒ! Cu ce te pot ajuta la matematicÄƒ astÄƒzi?' },
                            'help': { en: 'I can explain math concepts, help with exercises, or provide examples. What do you need?', ro: 'Pot explica concepte matematice, ajuta cu exerciÈ›ii sau oferi exemple. De ce ai nevoie?' },
                            'explain quadratic equations': { 
                                en: 'A quadratic equation is any equation that can be rearranged in standard form as axÂ² + bx + c = 0. You can solve it by factoring, completing the square, or using the quadratic formula.',
                                ro: 'O ecuaÈ›ie pÄƒtraticÄƒ este orice ecuaÈ›ie care poate fi rearanjatÄƒ Ã®n forma standard axÂ² + bx + c = 0. PoÈ›i sÄƒ o rezolvi prin factorizare, completarea pÄƒtratului sau folosind formula pÄƒtraticÄƒ.'
                            },
                            'default': { 
                                en: 'I\'m here to help with your math questions. Could you be more specific about what you need help with?',
                                ro: 'Sunt aici sÄƒ te ajut cu Ã®ntrebÄƒrile tale de matematicÄƒ. PoÈ›i fi mai specific cu ce anume ai nevoie de ajutor?'
                            }
                        };
                        
                        const lowerMessage = message.toLowerCase();
                        let response = responses.default;
                        
                        if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || 
                            lowerMessage.includes('bunÄƒ') || lowerMessage.includes('salut')) {
                            response = responses.hello;
                        } else if (lowerMessage.includes('help') || lowerMessage.includes('ajutor')) {
                            response = responses.help;
                        } else if (lowerMessage.includes('quadratic') || lowerMessage.includes('pÄƒtratic')) {
                            response = responses['explain quadratic equations'];
                        }
                        
                        resolve({ success: true, response });
                    }, 800);
                });
            },

            signup: (userData) => {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        const userExists = mockUsers.some(u => u.email === userData.email);
                        if (userExists) {
                            reject({ success: false, message: 'Email already registered' });
                        } else {
                            const newUser = {
                                id: mockUsers.length + 1,
                                ...userData
                            };
                            mockUsers.push(newUser);
                            resolve({ success: true, user: newUser });
                        }
                    }, 1000);
                });
            }
        };

        // Utility Functions
        const Utils = {
            createElement: (tag, className, text) => {
                const element = document.createElement(tag);
                if (className) element.className = className;
                if (text) element.textContent = text;
                return element;
            },
            
            createElementWithHTML: (html) => {
                const template = document.createElement('template');
                template.innerHTML = html.trim();
                return template.content.firstChild;
            },
            
            addClass: (element, className) => {
                element.classList.add(className);
            },
            
            removeClass: (element, className) => {
                element.classList.remove(className);
            },
            
            toggleClass: (element, className) => {
                element.classList.toggle(className);
            },
            
            createConfetti: () => {
                const colors = ['#4361ee', '#3f37c9', '#4895ef', '#4cc9f0', '#f72585'];
                const confettiContainer = document.createElement('div');
                confettiContainer.style.position = 'fixed';
                confettiContainer.style.top = '0';
                confettiContainer.style.left = '0';
                confettiContainer.style.width = '100%';
                confettiContainer.style.height = '100%';
                confettiContainer.style.pointerEvents = 'none';
                confettiContainer.style.zIndex = '1000';
                
                for (let i = 0; i < 100; i++) {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = `${Math.random() * 100}%`;
                    confetti.style.width = `${Math.random() * 10 + 5}px`;
                    confetti.style.height = `${Math.random() * 10 + 5}px`;
                    confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                    
                    const animationDuration = Math.random() * 3 + 2;
                    confetti.style.animation = `fall ${animationDuration}s linear forwards`;
                    
                    const keyframes = `
                        @keyframes fall {
                            to {
                                transform: translateY(100vh) rotate(${Math.random() * 360}deg);
                            }
                        }
                    `;
                    
                    const style = document.createElement('style');
                    style.innerHTML = keyframes;
                    document.head.appendChild(style);
                    
                    confettiContainer.appendChild(confetti);
                }
                
                document.body.appendChild(confettiContainer);
                
                setTimeout(() => {
                    document.body.removeChild(confettiContainer);
                }, 3000);
            },
            
            translate: (key, params = {}) => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                const translation = translations[lang][key] || translations['en'][key];
                
                if (typeof translation === 'string') {
                    return translation.replace(/{(\w+)}/g, (match, param) => params[param] || match);
                }
                
                return translation;
            },
            
            getTranslatedText: (textObj) => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                return textObj[lang] || textObj['en'] || '';
            }
        };

        // Components
        const SignInPage = (() => {
            const render = () => {
                const container = Utils.createElement('div', 'auth-container animate-fade');
                
                const card = Utils.createElement('div', 'auth-card');
                
                const header = Utils.createElement('div', 'auth-header');
                const logo = Utils.createElement('div', 'auth-logo', 'LearnZy');
                const title = Utils.createElement('h1', 'auth-title', Utils.translate('signin.title'));
                const subtitle = Utils.createElement('p', 'auth-subtitle', Utils.translate('signin.subtitle'));
                
                header.appendChild(logo);
                header.appendChild(title);
                header.appendChild(subtitle);
                
                const form = Utils.createElement('form', 'flex flex-col gap-3');
                form.id = 'signin-form';
                
                const emailGroup = Utils.createElement('div', 'input-group');
                const emailLabel = Utils.createElement('label', 'input-label', Utils.translate('signin.email'));
                emailLabel.htmlFor = 'email';
                const emailInput = Utils.createElement('input', 'input-field');
                emailInput.type = 'email';
                emailInput.id = 'email';
                emailInput.placeholder = 'your@email.com';
                emailInput.required = true;
                
                emailGroup.appendChild(emailLabel);
                emailGroup.appendChild(emailInput);
                
                const passwordGroup = Utils.createElement('div', 'input-group');
                const passwordLabel = Utils.createElement('label', 'input-label', Utils.translate('signin.password'));
                passwordLabel.htmlFor = 'password';
                const passwordInput = Utils.createElement('input', 'input-field');
                passwordInput.type = 'password';
                passwordInput.id = 'password';
                passwordInput.placeholder = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
                passwordInput.required = true;
                
                passwordGroup.appendChild(passwordLabel);
                passwordGroup.appendChild(passwordInput);
                
                const errorAlert = Utils.createElement('div', 'alert alert-error hidden');
                errorAlert.id = 'error-alert';
                
                const submitButton = Utils.createElement('button', 'btn btn-primary', Utils.translate('signin.submit'));
                submitButton.type = 'submit';
                
                form.appendChild(errorAlert);
                form.appendChild(emailGroup);
                form.appendChild(passwordGroup);
                form.appendChild(submitButton);
                
                // Add signup link
                const signupLink = Utils.createElement('div', 'text-center mt-4');
                const signupText = Utils.createElement('span', 'text-sm', Utils.translate('signin.noAccount') + ' ');
                const signupAnchor = Utils.createElement('a', 'text-primary cursor-pointer', Utils.translate('signin.signup'));
                signupAnchor.addEventListener('click', () => {
                    AppState.setState({ currentPage: 'signup' });
                });
                
                signupLink.appendChild(signupText);
                signupLink.appendChild(signupAnchor);
                card.appendChild(signupLink);
                
                card.appendChild(header);
                card.appendChild(form);
                container.appendChild(card);
                
                form.addEventListener('submit', handleSubmit);
                
                return container;
            };
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                
                const form = e.target;
                const email = form.querySelector('#email').value;
                const password = form.querySelector('#password').value;
                const errorAlert = form.querySelector('#error-alert');
                
                try {
                    const response = await mockAPI.login(email, password);
                    
                    if (response.success) {
                        AppState.setState({ 
                            user: response.user,
                            currentPage: 'learning-style'
                        });
                    }
                } catch (error) {
                    errorAlert.textContent = Utils.translate('signin.error');
                    Utils.removeClass(errorAlert, 'hidden');
                    
                    setTimeout(() => {
                        Utils.addClass(errorAlert, 'hidden');
                    }, 3000);
                }
            };
            
            return { render };
        })();

        const SignUpPage = (() => {
            const render = () => {
                const container = Utils.createElement('div', 'auth-container animate-fade');
                
                const card = Utils.createElement('div', 'auth-card');
                
                const header = Utils.createElement('div', 'auth-header');
                const logo = Utils.createElement('div', 'auth-logo', 'LearnZy');
                const title = Utils.createElement('h1', 'auth-title', Utils.translate('signup.title'));
                const subtitle = Utils.createElement('p', 'auth-subtitle', Utils.translate('signup.subtitle'));
                
                header.appendChild(logo);
                header.appendChild(title);
                header.appendChild(subtitle);
                
                const form = Utils.createElement('form', 'flex flex-col gap-3');
                form.id = 'signup-form';
                
                // Name field
                const nameGroup = Utils.createElement('div', 'input-group');
                const nameLabel = Utils.createElement('label', 'input-label', Utils.translate('signup.name'));
                nameLabel.htmlFor = 'name';
                const nameInput = Utils.createElement('input', 'input-field');
                nameInput.type = 'text';
                nameInput.id = 'name';
                nameInput.placeholder = Utils.translate('signup.name');
                nameInput.required = true;
                
                nameGroup.appendChild(nameLabel);
                nameGroup.appendChild(nameInput);
                
                // Email field
                const emailGroup = Utils.createElement('div', 'input-group');
                const emailLabel = Utils.createElement('label', 'input-label', Utils.translate('signup.email'));
                emailLabel.htmlFor = 'email';
                const emailInput = Utils.createElement('input', 'input-field');
                emailInput.type = 'email';
                emailInput.id = 'email';
                emailInput.placeholder = 'your@email.com';
                emailInput.required = true;
                
                emailGroup.appendChild(emailLabel);
                emailGroup.appendChild(emailInput);
                
                // Password field
                const passwordGroup = Utils.createElement('div', 'input-group');
                const passwordLabel = Utils.createElement('label', 'input-label', Utils.translate('signup.password'));
                passwordLabel.htmlFor = 'password';
                const passwordInput = Utils.createElement('input', 'input-field');
                passwordInput.type = 'password';
                passwordInput.id = 'password';
                passwordInput.placeholder = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
                passwordInput.required = true;
                passwordInput.minLength = 8;
                
                passwordGroup.appendChild(passwordLabel);
                passwordGroup.appendChild(passwordInput);
                
                // Confirm Password field
                const confirmGroup = Utils.createElement('div', 'input-group');
                const confirmLabel = Utils.createElement('label', 'input-label', Utils.translate('signup.confirm'));
                confirmLabel.htmlFor = 'confirm';
                const confirmInput = Utils.createElement('input', 'input-field');
                confirmInput.type = 'password';
                confirmInput.id = 'confirm';
                confirmInput.placeholder = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
                confirmInput.required = true;
                
                confirmGroup.appendChild(confirmLabel);
                confirmGroup.appendChild(confirmInput);
                
                // Grade level selection
                const gradeGroup = Utils.createElement('div', 'input-group');
                const gradeLabel = Utils.createElement('label', 'input-label', Utils.translate('signup.grade'));
                gradeLabel.htmlFor = 'grade';
                const gradeSelect = Utils.createElement('select', 'input-field');
                gradeSelect.id = 'grade';
                
                const grades = [
                    { en: '9th Grade', ro: 'Clasa a 9-a' },
                    { en: '10th Grade', ro: 'Clasa a 10-a' },
                    { en: '11th Grade', ro: 'Clasa a 11-a' },
                    { en: '12th Grade', ro: 'Clasa a 12-a' }
                ];
                
                grades.forEach(grade => {
                    const option = Utils.createElement('option', null, Utils.getTranslatedText(grade));
                    option.value = Utils.getTranslatedText(grade);
                    gradeSelect.appendChild(option);
                });
                
                gradeGroup.appendChild(gradeLabel);
                gradeGroup.appendChild(gradeSelect);
                
                // Terms checkbox
                const termsGroup = Utils.createElement('div', 'flex items-center gap-2');
                const termsCheck = Utils.createElement('input');
                termsCheck.type = 'checkbox';
                termsCheck.id = 'terms';
                termsCheck.required = true;
                const termsLabel = Utils.createElement('label', null, Utils.translate('signup.terms'));
                termsLabel.htmlFor = 'terms';
                termsLabel.style.fontSize = '0.875rem';
                
                termsGroup.appendChild(termsCheck);
                termsGroup.appendChild(termsLabel);
                
                const errorAlert = Utils.createElement('div', 'alert alert-error hidden');
                errorAlert.id = 'error-alert';
                
                const submitButton = Utils.createElement('button', 'btn btn-primary', Utils.translate('signup.submit'));
                submitButton.type = 'submit';
                
                form.appendChild(errorAlert);
                form.appendChild(nameGroup);
                form.appendChild(emailGroup);
                form.appendChild(passwordGroup);
                form.appendChild(confirmGroup);
                form.appendChild(gradeGroup);
                form.appendChild(termsGroup);
                form.appendChild(submitButton);
                
                // Login link
                const loginLink = Utils.createElement('div', 'text-center mt-4');
                const loginText = Utils.createElement('span', 'text-sm', Utils.translate('signup.haveAccount') + ' ');
                const loginAnchor = Utils.createElement('a', 'text-primary cursor-pointer', Utils.translate('signup.signin'));
                loginAnchor.addEventListener('click', () => {
                    AppState.setState({ currentPage: 'signin' });
                });
                
                loginLink.appendChild(loginText);
                loginLink.appendChild(loginAnchor);
                
                card.appendChild(header);
                card.appendChild(form);
                card.appendChild(loginLink);
                container.appendChild(card);
                
                form.addEventListener('submit', handleSubmit);
                
                return container;
            };
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                
                const form = e.target;
                const name = form.querySelector('#name').value;
                const email = form.querySelector('#email').value;
                const password = form.querySelector('#password').value;
                const confirm = form.querySelector('#confirm').value;
                const grade = form.querySelector('#grade').value;
                const errorAlert = form.querySelector('#error-alert');
                
                // Validation
                if (password !== confirm) {
                    errorAlert.textContent = Utils.translate('signup.errors.passwordMatch');
                    Utils.removeClass(errorAlert, 'hidden');
                    return;
                }
                
                if (password.length < 8) {
                    errorAlert.textContent = Utils.translate('signup.errors.passwordLength');
                    Utils.removeClass(errorAlert, 'hidden');
                    return;
                }
                
                // Check if user already exists
                const userExists = mockUsers.some(u => u.email === email);
                if (userExists) {
                    errorAlert.textContent = Utils.translate('signup.errors.emailExists');
                    Utils.removeClass(errorAlert, 'hidden');
                    return;
                }
                
                try {
                    const response = await mockAPI.signup({
                        name,
                        email,
                        password,
                        grade
                    });
                    
                    if (response.success) {
                        AppState.setState({ 
                            user: response.user,
                            currentPage: 'learning-style'
                        });
                    }
                } catch (error) {
                    errorAlert.textContent = error.message;
                    Utils.removeClass(errorAlert, 'hidden');
                }
            };
            
            return { render };
        })();

        const LearningStylePage = (() => {
            let currentQuestion = 0;
            const answers = [];
            
            const render = () => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                const question = quizQuestions[currentQuestion];
                
                const container = Utils.createElement('div', 'quiz-container animate-fade');
                
                const progress = Utils.createElement('div', 'quiz-progress');
                const progressText = Utils.createElement('p', 'text-center', 
                    Utils.translate('learningStyle.question', {
                        current: currentQuestion + 1,
                        total: quizQuestions.length
                    })
                );
                const progressBar = Utils.createElement('div', 'progress-bar');
                const progressFill = Utils.createElement('div', 'progress-fill');
                progressFill.style.width = `${((currentQuestion + 1) / quizQuestions.length) * 100}%`;
                
                progressBar.appendChild(progressFill);
                progress.appendChild(progressText);
                progress.appendChild(progressBar);
                
                const questionContainer = Utils.createElement('div', 'quiz-question');
                const questionText = Utils.createElement('h2', 'quiz-question-text', question.question[lang] || question.question['en']);
                
                const optionsContainer = Utils.createElement('div', 'flex flex-col gap-2');
                question.options.forEach((option, index) => {
                    const optionElement = Utils.createElement('div', 'quiz-option');
                    optionElement.textContent = option.text[lang] || option.text['en'];
                    optionElement.dataset.index = index;
                    
                    if (answers[currentQuestion] === index) {
                        Utils.addClass(optionElement, 'selected');
                    }
                    
                    optionElement.addEventListener('click', () => selectOption(optionElement, index));
                    optionsContainer.appendChild(optionElement);
                });
                
                questionContainer.appendChild(questionText);
                questionContainer.appendChild(optionsContainer);
                
                const navigation = Utils.createElement('div', 'quiz-navigation');
                
                const prevButton = Utils.createElement('button', 'btn btn-outline', Utils.translate('learningStyle.previous'));
                prevButton.type = 'button';
                if (currentQuestion === 0) {
                    prevButton.disabled = true;
                }
                prevButton.addEventListener('click', goToPreviousQuestion);
                
                const nextButtonText = currentQuestion === quizQuestions.length - 1 ? 
                    Utils.translate('learningStyle.submit') : 
                    Utils.translate('learningStyle.next');
                const nextButton = Utils.createElement('button', 'btn btn-primary', nextButtonText);
                nextButton.type = 'button';
                if (answers[currentQuestion] === undefined) {
                    nextButton.disabled = true;
                }
                nextButton.addEventListener('click', goToNextQuestion);
                
                navigation.appendChild(prevButton);
                navigation.appendChild(nextButton);
                
                container.appendChild(progress);
                container.appendChild(questionContainer);
                container.appendChild(navigation);
                
                return container;
            };
            
            const selectOption = (element, index) => {
                const options = element.parentElement.querySelectorAll('.quiz-option');
                options.forEach(opt => Utils.removeClass(opt, 'selected'));
                Utils.addClass(element, 'selected');
                
                answers[currentQuestion] = index;
                
                const nextButton = document.querySelector('.quiz-navigation .btn-primary');
                if (nextButton) {
                    nextButton.disabled = false;
                }
            };
            
            const goToPreviousQuestion = () => {
                if (currentQuestion > 0) {
                    currentQuestion--;
                    AppState.setState({ currentPage: 'learning-style' });
                }
            };
            
            const goToNextQuestion = async () => {
                if (currentQuestion < quizQuestions.length - 1) {
                    currentQuestion++;
                    AppState.setState({ currentPage: 'learning-style' });
                } else {
                    // Calculate learning style
                    const styleCounts = {
                        visual: 0,
                        auditory: 0,
                        kinesthetic: 0,
                        logical: 0
                    };
                    
                    answers.forEach((answerIndex, questionIndex) => {
                        const selectedOption = quizQuestions[questionIndex].options[answerIndex];
                        styleCounts[selectedOption.style]++;
                    });
                    
                    let maxStyle = 'visual';
                    let maxCount = 0;
                    
                    for (const [style, count] of Object.entries(styleCounts)) {
                        if (count > maxCount) {
                            maxCount = count;
                            maxStyle = style;
                        }
                    }
                    
                    try {
                        await mockAPI.submitLearningStyle(maxStyle);
                        AppState.setState({ 
                            learningStyle: maxStyle,
                            currentPage: 'learning-style-result'
                        });
                    } catch (error) {
                        console.error('Error submitting learning style:', error);
                    }
                }
            };
            
            return { render };
        })();

        const LearningStyleResultPage = (() => {
            const render = () => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                const style = learningStyles[state.learningStyle];
                
                const container = Utils.createElement('div', 'flex flex-col items-center justify-center h-screen animate-fade');
                
                const card = Utils.createElement('div', 'card text-center p-8 max-w-md');
                
                const icon = Utils.createElement('i', `${style.icon} text-6xl text-primary mb-4`);
                
                const title = Utils.createElement('h1', 'text-2xl font-bold mb-2', 
                    Utils.translate('yourStyle', { style: style.name[lang] || style.name['en'] })
                );
                
                const description = Utils.createElement('p', 'text-gray-600 mb-6', 
                    style.description[lang] || style.description['en']
                );
                
                const continueButton = Utils.createElement('button', 'btn btn-primary', 
                    Utils.translate('continueToDashboard')
                );
                continueButton.addEventListener('click', () => {
                    AppState.setState({ currentPage: 'dashboard' });
                });
                
                card.appendChild(icon);
                card.appendChild(title);
                card.appendChild(description);
                card.appendChild(continueButton);
                
                container.appendChild(card);
                
                return container;
            };
            
            return { render };
        })();

        const Navbar = (() => {
            const render = () => {
                const state = AppState.getState();
                const navbar = Utils.createElement('nav', 'navbar shadow');
                
                const leftSection = Utils.createElement('div', 'flex items-center gap-4');
                
                const menuButton = Utils.createElement('button', 'btn btn-ghost navbar-menu');
                const menuIcon = Utils.createElement('i', 'fas fa-bars');
                menuButton.appendChild(menuIcon);
                menuButton.addEventListener('click', () => {
                    AppState.setState({ sidebarOpen: !state.sidebarOpen });
                });
                
                const logo = Utils.createElement('div', 'text-xl font-bold text-primary', 'LearnZy');
                logo.style.cursor = 'pointer';
                logo.addEventListener('click', () => {
                    AppState.setState({ currentPage: 'dashboard' });
                });
                
                leftSection.appendChild(menuButton);
                leftSection.appendChild(logo);
                
                const rightSection = Utils.createElement('div', 'flex items-center gap-4');
                
                // Streak display
                const streakContainer = Utils.createElement('div', 'streak-container tooltip');
                const streakIcon = Utils.createElement('i', 'fas fa-fire streak-icon');
                const streakCount = Utils.createElement('span', 'streak-count', `${state.streak}d`);
                
                const streakTooltip = Utils.createElement('span', 'tooltip-text', 
                    Utils.translate('navbar.streak', { days: state.streak })
                );
                streakTooltip.style.whiteSpace = 'nowrap';
                
                streakContainer.appendChild(streakIcon);
                streakContainer.appendChild(streakCount);
                streakContainer.appendChild(streakTooltip);
                
                // XP and level display
                const levelContainer = Utils.createElement('div', 'level-indicator tooltip');
                const levelBadge = Utils.createElement('div', 'level-badge', state.level);
                const xpText = Utils.createElement('span', null, `${state.xp} XP`);
                
                const levelTooltip = Utils.createElement('span', 'tooltip-text', 
                    Utils.translate('navbar.level', { level: state.level, xp: state.xp })
                );
                levelTooltip.style.whiteSpace = 'nowrap';
                
                levelContainer.appendChild(levelBadge);
                levelContainer.appendChild(xpText);
                levelContainer.appendChild(levelTooltip);
                
                // Settings dropdown
                const settingsDropdown = Utils.createElement('div', 'settings-dropdown');
                const settingsButton = Utils.createElement('button', 'btn btn-ghost');
                const settingsIcon = Utils.createElement('i', 'fas fa-cog');
                settingsButton.appendChild(settingsIcon);
                
                const settingsMenu = Utils.createElement('div', 'settings-menu shadow hidden');
                
                // Dark mode toggle
                const darkModeItem = Utils.createElement('div', 'settings-item');
                const darkModeLabel = Utils.createElement('span', null, Utils.translate('navbar.settings.darkMode'));
                const darkModeToggle = Utils.createElement('label', 'theme-toggle');
                const darkModeInput = Utils.createElement('input');
                darkModeInput.type = 'checkbox';
                darkModeInput.checked = state.darkMode;
                darkModeInput.addEventListener('change', (e) => {
                    AppState.setState({ darkMode: e.target.checked });
                    document.body.setAttribute('data-theme', e.target.checked ? 'dark' : 'light');
                });
                
                const darkModeSlider = Utils.createElement('span', 'theme-slider');
                darkModeToggle.appendChild(darkModeInput);
                darkModeToggle.appendChild(darkModeSlider);
                
                darkModeItem.appendChild(darkModeLabel);
                darkModeItem.appendChild(darkModeToggle);
                
                // Animations toggle
                const animationsItem = Utils.createElement('div', 'settings-item');
                const animationsLabel = Utils.createElement('span', null, Utils.translate('navbar.settings.animations'));
                const animationsToggle = Utils.createElement('input');
                animationsToggle.type = 'checkbox';
                animationsToggle.checked = state.animationsEnabled;
                animationsToggle.addEventListener('change', (e) => {
                    AppState.setState({ animationsEnabled: e.target.checked });
                });
                
                animationsItem.appendChild(animationsLabel);
                animationsItem.appendChild(animationsToggle);
                
                // Language selector
                const languageItem = Utils.createElement('div', 'settings-item');
                const languageLabel = Utils.createElement('span', null, Utils.translate('navbar.settings.language'));
                const languageSelect = Utils.createElement('select');
                const englishOption = Utils.createElement('option', null, 'English');
                englishOption.value = 'en';
                const romanianOption = Utils.createElement('option', null, 'RomÃ¢nÄƒ');
                romanianOption.value = 'ro';
                
                languageSelect.appendChild(englishOption);
                languageSelect.appendChild(romanianOption);
                languageSelect.value = state.language;
                languageSelect.addEventListener('change', (e) => {
                    AppState.setState({ language: e.target.value });
                });
                
                languageItem.appendChild(languageLabel);
                languageItem.appendChild(languageSelect);
                
                settingsMenu.appendChild(darkModeItem);
                settingsMenu.appendChild(animationsItem);
                settingsMenu.appendChild(languageItem);
                
                settingsButton.addEventListener('click', () => {
                    settingsMenu.classList.toggle('hidden');
                });
                
                document.addEventListener('click', (e) => {
                    if (!settingsDropdown.contains(e.target)) {
                        settingsMenu.classList.add('hidden');
                    }
                });
                
                settingsDropdown.appendChild(settingsButton);
                settingsDropdown.appendChild(settingsMenu);
                
                rightSection.appendChild(streakContainer);
                rightSection.appendChild(levelContainer);
                rightSection.appendChild(settingsDropdown);
                
                navbar.appendChild(leftSection);
                navbar.appendChild(rightSection);
                
                return navbar;
            };
            
            return { render };
        })();

        const Sidebar = (() => {
            const render = () => {
                const state = AppState.getState();
                const sidebar = Utils.createElement('div', `sidebar ${state.sidebarOpen ? 'open' : ''}`);
                
                const navbar = Utils.translate('navbar');
                const navItems = navbar && Array.isArray(navbar.menu) ? navbar.menu : [];
                if (!navItems.length) {
                console.warn("âš ï¸ navItems e gol sau undefined. VerificÄƒ cheia 'navbar.menu' Ã®n fiÈ™ierul de traducere.");
                 }
                
                navItems.forEach(item => {
                    const navItem = Utils.createElement('a', `sidebar-item ${state.currentPage === item.page ? 'active' : ''}`);
                    const icon = Utils.createElement('i', item.icon || 'fas fa-circle');
                    const text = Utils.createElement('span', null, item.text);
                    
                    navItem.appendChild(icon);
                    navItem.appendChild(text);
                    
                    navItem.addEventListener('click', () => {
                        AppState.setState({ 
                            currentPage: item.page,
                            sidebarOpen: false
                        });
                    });
                    
                    sidebar.appendChild(navItem);
                });
                
                return sidebar;
            };
            
            return { render };
        })();

        const DashboardPage = (() => {
            const render = () => {
                console.log("Traducere completÄƒ dashboard:", Utils.translate('dashboard'));
                const state = AppState.getState();
                const lang = state.language || 'en';
                const container = Utils.createElement('div', 'main-content');
                
                const header = Utils.createElement('div', 'dashboard-header');
                const title = Utils.createElement('h1', 'dashboard-title', Utils.translate('dashboard.title'));
                
                header.appendChild(title);
                container.appendChild(header);
                
                // Welcome message with learning style
                const welcomeCard = Utils.createElement('div', 'card mb-6');
                const welcomeText = Utils.createElement('p', null, 
                    Utils.translate('dashboard.welcome', { name: state.user?.name || Utils.translate('student') })
                );
                const learningStyleText = Utils.createElement('p', null);
                
                if (state.learningStyle) {
                    const style = learningStyles[state.learningStyle];
                    const styleIcon = Utils.createElement('i', `${style.icon} mr-2`);
                    learningStyleText.appendChild(styleIcon);
                    learningStyleText.appendChild(document.createTextNode(
                        Utils.translate('dashboard.learningStyle', { style: style.name[lang] || style.name['en'] })
                    ));
                } else {
                    learningStyleText.textContent = Utils.translate('dashboard.completeAssessment');
                }
                
                welcomeCard.appendChild(welcomeText);
                welcomeCard.appendChild(learningStyleText);
                container.appendChild(welcomeCard);
                
                // Stats cards
                const statsContainer = Utils.createElement('div', 'grid grid-cols-2 md:grid-cols-4 gap-4 mb-6');
                
                const stats = [
                    { 
                        icon: 'fas fa-book', 
                        color: 'bg-primary', 
                        label: Utils.translate('dashboard.stats.topicsStarted'), 
                        value: 4 
                    },
                    { 
                        icon: 'fas fa-check-circle', 
                        color: 'bg-success', 
                        label: Utils.translate('dashboard.stats.topicsCompleted'), 
                        value: 2 
                    },
                    { 
                        icon: 'fas fa-star', 
                        color: 'bg-warning', 
                        label: Utils.translate('dashboard.stats.currentStreak'), 
                        value: `${state.streak} ${Utils.translate('days')}` 
                    },
                    { 
                        icon: 'fas fa-trophy', 
                        color: 'bg-danger', 
                        label: Utils.translate('dashboard.stats.badgesEarned'), 
                        value: 2 
                    }
                ];
                
                stats.forEach(stat => {
                    const statCard = Utils.createElement('div', 'stats-card card');
                    
                    const icon = Utils.createElement('div', `stats-icon ${stat.color} text-white`);
                    const iconElement = Utils.createElement('i', stat.icon);
                    icon.appendChild(iconElement);
                    
                    const content = Utils.createElement('div', 'stats-content');
                    const label = Utils.createElement('div', 'stats-label', stat.label);
                    const value = Utils.createElement('div', 'stats-value', stat.value);
                    
                    content.appendChild(label);
                    content.appendChild(value);
                    
                    statCard.appendChild(icon);
                    statCard.appendChild(content);
                    
                    statsContainer.appendChild(statCard);
                });
                
                container.appendChild(statsContainer);
                
                // Categories
                const categoriesTitle = Utils.createElement('h2', 'text-xl font-bold mb-4', Utils.translate('dashboard.categories'));
                container.appendChild(categoriesTitle);
                
                const categoriesGrid = Utils.createElement('div', 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6');
                
                categories.forEach(category => {
                    const categoryCard = Utils.createElement('div', 'category-card card');
                    categoryCard.addEventListener('click', () => {
                        AppState.setState({ 
                            currentPage: 'category',
                            currentCategory: category.id
                        });
                    });
                    
                    const bg = Utils.createElement('div', 'category-bg rounded-t-lg');
                    bg.style.backgroundColor = getRandomColor();
                    
                    const overlay = Utils.createElement('div', 'category-overlay');
                    const categoryName = Utils.createElement('h3', 'category-title', 
                        Utils.getTranslatedText(category.name)
                    );
                    const categoryDesc = Utils.createElement('p', 'text-sm', 
                        Utils.getTranslatedText(category.description)
                    );
                    
                    const progress = Utils.createElement('div', 'category-progress');
                    const progressFill = Utils.createElement('div', 'category-progress-fill');
                    progressFill.style.width = `${category.progress}%`;
                    
                    progress.appendChild(progressFill);
                    
                    overlay.appendChild(categoryName);
                    overlay.appendChild(categoryDesc);
                    overlay.appendChild(progress);
                    
                    bg.appendChild(overlay);
                    categoryCard.appendChild(bg);
                    
                    categoriesGrid.appendChild(categoryCard);
                });
                
                container.appendChild(categoriesGrid);
                
                // Badges section
                const badgesTitle = Utils.createElement('h2', 'text-xl font-bold mb-4 mt-8', Utils.translate('dashboard.badges'));
                container.appendChild(badgesTitle);
                
                const badgesGrid = Utils.createElement('div', 'grid grid-cols-2 md:grid-cols-4 gap-4');
                
                badges.filter(b => b.earned).slice(0, 4).forEach(badge => {
                    const badgeCard = Utils.createElement('div', 'card p-4 flex flex-col items-center text-center');
                    
                    const badgeIcon = Utils.createElement('i', 'fas fa-trophy text-3xl text-warning mb-2');
                    const badgeName = Utils.createElement('h3', 'font-bold mb-1', 
                        Utils.getTranslatedText(badge.name)
                    );
                    const badgeDesc = Utils.createElement('p', 'text-sm text-gray-600', 
                        Utils.getTranslatedText(badge.description)
                    );
                    
                    badgeCard.appendChild(badgeIcon);
                    badgeCard.appendChild(badgeName);
                    badgeCard.appendChild(badgeDesc);
                    
                    badgesGrid.appendChild(badgeCard);
                });
                
                container.appendChild(badgesGrid);
                
                return container;
            };
            
            const getRandomColor = () => {
                const colors = [
                    '#4361ee', '#3f37c9', '#4895ef', '#4cc9f0', '#f72585',
                    '#7209b7', '#560bad', '#480ca8', '#3a0ca3', '#3f37c9'
                ];
                return colors[Math.floor(Math.random() * colors.length)];
            };
            
            return { render };
        })();

        const CategoryPage = (() => {
            const render = () => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                const category = categories.find(c => c.id === state.currentCategory);
                
                if (!category) {
                    AppState.setState({ currentPage: 'dashboard' });
                    return Utils.createElement('div');
                }
                
                const container = Utils.createElement('div', 'main-content');
                
                // Back button
                const backButton = Utils.createElement('button', 'btn btn-ghost mb-4 flex items-center gap-2');
                const backIcon = Utils.createElement('i', 'fas fa-arrow-left');
                const backText = Utils.createElement('span', null, Utils.translate('category.back'));
                
                backButton.appendChild(backIcon);
                backButton.appendChild(backText);
                backButton.addEventListener('click', () => {
                    AppState.setState({ currentPage: 'dashboard' });
                });
                
                container.appendChild(backButton);
                
                // Category header
                const header = Utils.createElement('div', 'flex items-start justify-between mb-6');
                const titleGroup = Utils.createElement('div');
                const title = Utils.createElement('h1', 'text-2xl font-bold mb-2', 
                    Utils.getTranslatedText(category.name)
                );
                const description = Utils.createElement('p', 'text-gray-600', 
                    Utils.getTranslatedText(category.description)
                );
                
                titleGroup.appendChild(title);
                titleGroup.appendChild(description);
                
                const progressGroup = Utils.createElement('div', 'flex flex-col items-end');
                const progressText = Utils.createElement('span', 'font-bold', 
                    Utils.translate('category.complete', { percent: category.progress })
                );
                const progressBar = Utils.createElement('div', 'progress-bar w-40');
                const progressFill = Utils.createElement('div', 'progress-fill');
                progressFill.style.width = `${category.progress}%`;
                
                progressBar.appendChild(progressFill);
                progressGroup.appendChild(progressText);
                progressGroup.appendChild(progressBar);
                
                header.appendChild(titleGroup);
                header.appendChild(progressGroup);
                
                container.appendChild(header);
                
                // Topics list
                const topicsTitle = Utils.createElement('h2', 'text-xl font-bold mb-4', Utils.translate('category.topics'));
                container.appendChild(topicsTitle);
                
                const topicsGrid = Utils.createElement('div', 'grid grid-cols-1 md:grid-cols-2 gap-4');
                
                category.topics.forEach(topic => {
                    const topicCard = Utils.createElement('div', 'topic-card card');
                    topicCard.addEventListener('click', () => {
                        AppState.setState({ 
                            currentPage: 'topic',
                            currentTopic: topic.id
                        });
                    });
                    
                    const header = Utils.createElement('div', 'topic-header');
                    const title = Utils.createElement('h3', 'topic-title', 
                        Utils.getTranslatedText(topic.name)
                    );
                    
                    let statusText = '';
                    if (topic.completed) {
                        statusText = Utils.translate('category.status.completed');
                    } else if (topic.completed === false) {
                        statusText = Utils.translate('category.status.inProgress');
                    } else {
                        statusText = Utils.translate('category.status.notStarted');
                    }
                    
                    const status = Utils.createElement('span', `topic-status ${topic.completed ? 'completed' : topic.completed === false ? 'in-progress' : 'not-started'}`);
                    status.textContent = statusText;
                    
                    header.appendChild(title);
                    header.appendChild(status);
                    
                    const description = Utils.createElement('p', 'topic-description', 
                        Utils.getTranslatedText(topic.description)
                    );
                    
                    const footer = Utils.createElement('div', 'topic-footer');
                    const exercisesCount = Utils.createElement('span', 'text-sm text-gray-600', 
                        Utils.translate('category.exercises', { count: topic.exercises.length })
                    );
                    const startButton = Utils.createElement('button', 'btn btn-primary btn-sm', 
                        topic.completed ? Utils.translate('category.review') : Utils.translate('category.start')
                    );
                    
                    footer.appendChild(exercisesCount);
                    footer.appendChild(startButton);
                    
                    topicCard.appendChild(header);
                    topicCard.appendChild(description);
                    topicCard.appendChild(footer);
                    
                    topicsGrid.appendChild(topicCard);
                });
                
                container.appendChild(topicsGrid);
                
                return container;
            };
            
            return { render };
        })();

        const TopicPage = (() => {
            const render = () => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                const category = categories.find(c => c.id === state.currentCategory);
                const topic = category?.topics.find(t => t.id === state.currentTopic);
                
                if (!topic) {
                    AppState.setState({ currentPage: 'dashboard' });
                    return Utils.createElement('div');
                }
                
                const container = Utils.createElement('div', 'main-content');
                
                // Back button
                const backButton = Utils.createElement('button', 'btn btn-ghost mb-4 flex items-center gap-2');
                const backIcon = Utils.createElement('i', 'fas fa-arrow-left');
                const backText = Utils.createElement('span', null, 
                    Utils.translate('topic.back', { category: Utils.getTranslatedText(category.name) })
                );
                
                backButton.appendChild(backIcon);
                backButton.appendChild(backText);
                backButton.addEventListener('click', () => {
                    AppState.setState({ currentPage: 'category' });
                });
                
                container.appendChild(backButton);
                
                // Topic header
                const header = Utils.createElement('div', 'mb-6');
                const title = Utils.createElement('h1', 'text-2xl font-bold mb-2', 
                    Utils.getTranslatedText(topic.name)
                );
                const description = Utils.createElement('p', 'text-gray-600 mb-4', 
                    Utils.getTranslatedText(topic.description)
                );
                
                header.appendChild(title);
                header.appendChild(description);
                
                // Progress bar
                const progressBar = Utils.createElement('div', 'progress-bar mb-4');
                const progressFill = Utils.createElement('div', 'progress-fill');
                progressFill.style.width = `${topic.completed ? 100 : topic.completed === false ? 50 : 0}%`;
                
                progressBar.appendChild(progressFill);
                header.appendChild(progressBar);
                
                container.appendChild(header);
                
                // Video lesson
                const videoTitle = Utils.createElement('h2', 'text-xl font-bold mb-4', Utils.translate('topic.videoLesson'));
                container.appendChild(videoTitle);
                
                const videoPlayer = Utils.createElement('div', 'video-player');
                const videoPlaceholder = Utils.createElement('div', 'video-placeholder');
                const videoIcon = Utils.createElement('i', 'fas fa-play');
                videoPlaceholder.appendChild(videoIcon);
                videoPlayer.appendChild(videoPlaceholder);
                
                container.appendChild(videoPlayer);
                
                // Exercises
                const exercisesTitle = Utils.createElement('h2', 'text-xl font-bold mb-4 mt-8', Utils.translate('topic.exercises'));
                container.appendChild(exercisesTitle);
                
                if (topic.exercises.length === 0) {
                    const emptyState = Utils.createElement('div', 'card p-8 text-center');
                    const emptyIcon = Utils.createElement('i', 'fas fa-book-open text-3xl text-gray-400 mb-4');
                    const emptyText = Utils.createElement('p', 'text-gray-600', Utils.translate('topic.noExercises'));
                    
                    emptyState.appendChild(emptyIcon);
                    emptyState.appendChild(emptyText);
                    container.appendChild(emptyState);
                } else {
                    const startButton = Utils.createElement('button', 'btn btn-primary', Utils.translate('topic.startExercises'));
                    startButton.addEventListener('click', () => {
                        AppState.setState({ 
                            currentPage: 'exercise',
                            currentExercise: 0
                        });
                    });
                    
                    container.appendChild(startButton);
                }
                
                return container;
            };
            
            return { render };
        })();

        const ExercisePage = (() => {
            let selectedOption = null;
            let showFeedback = false;
            let isCorrect = false;
            
            const render = () => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                const category = categories.find(c => c.id === state.currentCategory);
                const topic = category?.topics.find(t => t.id === state.currentTopic);
                const exercise = topic?.exercises[state.currentExercise];
                
                if (!exercise) {
                    AppState.setState({ currentPage: 'dashboard' });
                    return Utils.createElement('div');
                }
                
                const container = Utils.createElement('div', 'exercise-container main-content');
                
                // Back button
                const backButton = Utils.createElement('button', 'btn btn-ghost mb-4 flex items-center gap-2');
                const backIcon = Utils.createElement('i', 'fas fa-arrow-left');
                const backText = Utils.createElement('span', null, 
                    Utils.translate('exercise.back', { topic: Utils.getTranslatedText(topic.name) })
                );
                
                backButton.appendChild(backIcon);
                backButton.appendChild(backText);
                backButton.addEventListener('click', () => {
                    AppState.setState({ currentPage: 'topic' });
                });
                
                container.appendChild(backButton);
                
                // Progress indicator
                const progressText = Utils.createElement('p', 'text-center mb-4', 
                    Utils.translate('exercise.progress', {
                        current: state.currentExercise + 1,
                        total: topic.exercises.length
                    })
                );
                container.appendChild(progressText);
                
                // Question
                const question = Utils.createElement('div', 'exercise-question', 
                    Utils.getTranslatedText(exercise.question)
                );
                container.appendChild(question);
                
                // Options
                const optionsContainer = Utils.createElement('div', 'exercise-options');
                
                exercise.options.forEach((option, index) => {
                    const optionElement = Utils.createElement('div', 'exercise-option');
                    optionElement.textContent = Utils.getTranslatedText(option);
                    optionElement.dataset.index = index;
                    
                    if (showFeedback) {
                        if (index === exercise.answer) {
                            Utils.addClass(optionElement, 'correct');
                        } else if (index === selectedOption && !isCorrect) {
                            Utils.addClass(optionElement, 'incorrect');
                        }
                    } else if (selectedOption === index) {
                        Utils.addClass(optionElement, 'selected');
                    }
                    
                    if (!showFeedback) {
                        optionElement.addEventListener('click', () => selectOption(optionElement, index));
                    }
                    
                    optionsContainer.appendChild(optionElement);
                });
                
                container.appendChild(optionsContainer);
                
                // Feedback
                if (showFeedback) {
                    const feedback = Utils.createElement('div', `exercise-feedback ${isCorrect ? 'correct' : 'incorrect'}`);
                    const feedbackTitle = Utils.createElement('h3', 'font-bold mb-2', 
                        isCorrect ? Utils.translate('exercise.feedback.correct') : Utils.translate('exercise.feedback.incorrect')
                    );
                    const feedbackText = Utils.createElement('p', null, 
                        Utils.getTranslatedText(exercise.explanation)
                    );
                    
                    feedback.appendChild(feedbackTitle);
                    feedback.appendChild(feedbackText);
                    container.appendChild(feedback);
                    
                    if (isCorrect && state.animationsEnabled) {
                        Utils.createConfetti();
                    }
                }
                
                // Navigation
                const navigation = Utils.createElement('div', 'exercise-navigation');
                
                if (state.currentExercise > 0) {
                    const prevButton = Utils.createElement('button', 'btn btn-outline', Utils.translate('exercise.previous'));
                    prevButton.addEventListener('click', () => {
                        AppState.setState({ 
                            currentExercise: state.currentExercise - 1,
                            currentPage: 'exercise'
                        });
                        resetExerciseState();
                    });
                    navigation.appendChild(prevButton);
                } else {
                    navigation.appendChild(Utils.createElement('div')); // Empty div for spacing
                }
                
                if (!showFeedback) {
                    const checkButton = Utils.createElement('button', 'btn btn-primary', Utils.translate('exercise.check'));
                    checkButton.disabled = selectedOption === null;
                    checkButton.addEventListener('click', checkAnswer);
                    navigation.appendChild(checkButton);
                } else {
                    const nextButtonText = state.currentExercise < topic.exercises.length - 1 ? 
                        Utils.translate('exercise.next') : 
                        Utils.translate('exercise.finish');
                    const nextButton = Utils.createElement('button', 'btn btn-primary', nextButtonText);
                    nextButton.addEventListener('click', () => {
                        if (state.currentExercise < topic.exercises.length - 1) {
                            AppState.setState({ 
                                currentExercise: state.currentExercise + 1,
                                currentPage: 'exercise'
                            });
                        } else {
                            // Mark topic as completed
                            const updatedCategories = categories.map(c => {
                                if (c.id === state.currentCategory) {
                                    const updatedTopics = c.topics.map(t => {
                                        if (t.id === state.currentTopic) {
                                            return { ...t, completed: true };
                                        }
                                        return t;
                                    });
                                    return { ...c, topics: updatedTopics };
                                }
                                return c;
                            });
                            
                            // Update XP and level
                            const newXp = state.xp + 100;
                            const newLevel = Math.floor(newXp / 250) + 1;
                            
                            AppState.setState({ 
                                currentPage: 'topic',
                                xp: newXp,
                                level: newLevel
                            });
                        }
                        resetExerciseState();
                    });
                    navigation.appendChild(nextButton);
                }
                
                container.appendChild(navigation);
                
                return container;
            };
            
            const selectOption = (element, index) => {
                const options = document.querySelectorAll('.exercise-option');
                options.forEach(opt => Utils.removeClass(opt, 'selected'));
                Utils.addClass(element, 'selected');
                selectedOption = index;
                
                const checkButton = document.querySelector('.exercise-navigation .btn-primary');
                if (checkButton) {
                    checkButton.disabled = false;
                }
            };
            
            const checkAnswer = () => {
                const state = AppState.getState();
                const topic = categories.find(c => c.id === state.currentCategory)?.topics.find(t => t.id === state.currentTopic);
                const exercise = topic?.exercises[state.currentExercise];
                
                isCorrect = selectedOption === exercise.answer;
                showFeedback = true;
                
                // Update state to trigger re-render
                AppState.setState({ currentPage: 'exercise' });
            };
            
            const resetExerciseState = () => {
                selectedOption = null;
                showFeedback = false;
                isCorrect = false;
            };
            
            return { render };
        })();

        const AIAssistant = (() => {
            const render = () => {
                const state = AppState.getState();
                const lang = state.language || 'en';
                const container = Utils.createElement('div', 'assistant-container');
                
                const button = Utils.createElement('button', 'assistant-button animate-pulse');
                const icon = Utils.createElement('i', 'fas fa-robot');
                button.appendChild(icon);
                button.addEventListener('click', () => {
                    AppState.setState({ assistantOpen: !state.assistantOpen });
                });
                
                if (state.assistantOpen) {
                    const chat = Utils.createElement('div', 'assistant-chat shadow-lg');
                    
                    const header = Utils.createElement('div', 'assistant-header');
                    const title = Utils.createElement('div', 'assistant-title', Utils.translate('assistant.title'));
                    const closeButton = Utils.createElement('button', 'assistant-close');
                    const closeIcon = Utils.createElement('i', 'fas fa-times');
                    closeButton.appendChild(closeIcon);
                    closeButton.addEventListener('click', () => {
                        AppState.setState({ assistantOpen: false });
                    });
                    
                    header.appendChild(title);
                    header.appendChild(closeButton);
                    
                    const messages = Utils.createElement('div', 'assistant-messages');
                    state.messages.forEach(msg => {
                        const message = Utils.createElement('div', `assistant-message ${msg.sender}`);
                        message.textContent = msg.text;
                        messages.appendChild(message);
                    });
                    
                    const inputContainer = Utils.createElement('div', 'assistant-input');
                    const input = Utils.createElement('input', 'assistant-input-field');
                    input.placeholder = Utils.translate('assistant.placeholder');
                    const sendButton = Utils.createElement('button', 'assistant-send');
                    const sendIcon = Utils.createElement('i', 'fas fa-paper-plane');
                    sendButton.appendChild(sendIcon);
                    
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            sendMessage(input);
                        }
                    });
                    
                    sendButton.addEventListener('click', () => {
                        sendMessage(input);
                    });
                    
                    inputContainer.appendChild(input);
                    inputContainer.appendChild(sendButton);
                    
                    chat.appendChild(header);
                    chat.appendChild(messages);
                    chat.appendChild(inputContainer);
                    
                    container.appendChild(chat);
                }
                
                container.appendChild(button);
                
                return container;
            };
            
            const sendMessage = async (input) => {
                const message = input.value.trim();
                if (!message) return;
                
                // Add user message to state
                const newMessages = [...AppState.getState().messages, { sender: 'user', text: message }];
                AppState.setState({ messages: newMessages });
                
                // Clear input
                input.value = '';
                
                // Get AI response
                try {
                    const response = await mockAPI.aiAssistant(message);
                    if (response.success) {
                        const lang = AppState.getState().language || 'en';
                        const botResponse = response.response[lang] || response.response['en'];
                        const updatedMessages = [...newMessages, { sender: 'bot', text: botResponse }];
                        AppState.setState({ messages: updatedMessages });
                    }
                } catch (error) {
                    console.error('Error getting AI response:', error);
                }
            };
            
            return { render };
        })();

        // App Router
        const App = (() => {
            const init = () => {
                const appContainer = document.getElementById('app');
                const state = AppState.getState();
                
                // Set initial theme
                document.body.setAttribute('data-theme', state.darkMode ? 'dark' : 'light');
                
                // Render function
                const render = (state) => {
                    appContainer.innerHTML = '';
                    
                    // Render navbar if not on auth pages
                    if (!['signin', 'signup', 'learning-style', 'learning-style-result'].includes(state.currentPage)) {
                        appContainer.appendChild(Navbar.render());
                        appContainer.appendChild(Sidebar.render());
                    }
                    
                    // Render current page
                    let page;
                    switch (state.currentPage) {
                        case 'signin':
                            page = SignInPage.render();
                            break;
                        case 'signup':
                            page = SignUpPage.render();
                            break;
                        case 'learning-style':
                            page = LearningStylePage.render();
                            break;
                        case 'learning-style-result':
                            page = LearningStyleResultPage.render();
                            break;
                        case 'dashboard':
                            page = DashboardPage.render();
                            break;
                        case 'category':
                            page = CategoryPage.render();
                            break;
                        case 'topic':
                            page = TopicPage.render();
                            break;
                        case 'exercise':
                            page = ExercisePage.render();
                            break;
                        default:
                            page = DashboardPage.render();
                    }
                    
                    appContainer.appendChild(page);
                    
                    // Render AI assistant if not on auth pages
                    if (!['signin', 'signup', 'learning-style', 'learning-style-result'].includes(state.currentPage)) {
                        appContainer.appendChild(AIAssistant.render());
                    }
                };
                
                // Initial render
                render(state);
                
                // Subscribe to state changes
                AppState.subscribe(render);
            };
            
            return { init };
        })();

        // Initialize the app
        document.addEventListener('DOMContentLoaded', App.init);
    </script>
</body>
</html>
